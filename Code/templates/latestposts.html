{% extends 'layout.html' %} {% block content %}
<h1>Posts
  </h1>
    <div class="produce-section">
      <div class="produce-text">
        <h2>Join the Gardening Community</h2>
        <p>
Our forums are the perfect community to connect with other gardeners. From seeking advice, swapping tips, or simply discussing your new gardening endeavors, you'll find a welcoming community that can help. Join in and build your gardening knowledge along with others.
        </p>
      </div>
      <div class="produce-image">
        <img
          src="{{ url_for('static', filename='assets/gardeners2.jpg') }}"
          alt="Fresh Vegetables"
        />
      </div>
    </div>

    <div class="produce-section reverse">
      <div class="produce-text">
        <h2>Learn and Share</h2>
        <p>
The forums are the perfect place to learn from each other and exchange ideas. Whether you're trying to fix a plant problem or discover new gardening tools, you'll find an abundance of information provided by eager gardeners. Let's grow knowledge and help one another!        </p>
      </div>
      <div class="produce-image">
        <img
          src="{{ url_for('static', filename='assets/gardeners1.jpg') }}"
          alt="Fresh Fruits"
        />
      </div>
    </div>

    {% set sliders = [ {'id': 'latestCarousel', 'title': 'Latest Forums Activity',
    'data': latestRecipes}, {'id': 'bestRatedCarousel', 'title': 'Best Rated
    Posts', 'data': bestRated}, {'id': 'mostLovedCarousel', 'title': 'Most
    Starred Posts', 'data': mostLoved} ] %} {% for slider in sliders %}
    <div class="carousel-container">
      <h2>{{ slider.title }}</h2>
      <div class="carousel" id="{{ slider.id }}">
        <div class="carousel-images">
          {% for recipe in slider.data %}
          <div class="carousel-slide">
            <div class="text-box">
              <h3 class="recipe-title">{{ recipe.title }}</h3>
              {% set words = recipe.content.split() %}
              <p class="recipe-preview">
                {{ words[:40]|join(' ') }}{% if words|length > 40 %}...{% endif
                %}
              </p>
              <a
                href="{{ url_for('posts', postID=recipe.postID) }}"
                class="nav-btn"
              >
                Click To View More
              </a>
            </div>
          </div>
          {% endfor %}
        </div>
        <button class="prev">&#10094;</button>
        <button class="next">&#10095;</button>
        <div class="dots"></div>
      </div>
    </div>
    {% endfor %}

    <script>
      document.querySelectorAll(".carousel").forEach((carousel) => {
        const imagesContainer = carousel.querySelector(".carousel-images");
        const slides = imagesContainer.children;
        const prevBtn = carousel.querySelector(".prev");
        const nextBtn = carousel.querySelector(".next");
        const dotsContainer = carousel.querySelector(".dots");
        let index = 0;

        for (let i = 0; i < slides.length; i++) {
          const dot = document.createElement("span");
          dot.addEventListener("click", () => showSlide(i));
          dotsContainer.appendChild(dot);
        }
        const dots = dotsContainer.querySelectorAll("span");

        function showSlide(i) {
          index = (i + slides.length) % slides.length;
          imagesContainer.style.transform = `translateX(${-index * 100}%)`;
          dots.forEach((d) => d.classList.remove("active"));
          if (dots[index]) dots[index].classList.add("active");
        }

        prevBtn.addEventListener("click", () => showSlide(index - 1));
        nextBtn.addEventListener("click", () => showSlide(index + 1));

        showSlide(0);
      });
    </script>

    <style>
      h2 {
        text-align: center;
        color: #228b22;
      }
      .carousel {
        position: relative;
        width: 600px;
        height: 300px;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        margin: 2rem auto;
        background: #d1ffbd;
      }

      .carousel-images {
        display: flex;
        width: 100%;
        height: 100%;
        transition: transform 0.5s ease-in-out;
      }

      .carousel-slide {
        position: relative;
        flex-shrink: 0;
        width: 100%;
        height: 100%;
        padding: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .text-box {
        width: 90%;
        max-width: 550px; 
        height: 100%;
        max-height: 250px; 
        background: #b5e6a2;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow-y: auto; 
      }
      .recipe-title {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: #222;
        word-wrap: break-word; 
      }

.recipe-preview {
  font-size: 1rem;
  color: #555;
  line-height: 1.5;
  margin-bottom: 2rem;
  word-wrap: break-word; 
}

      .nav-btn {
        position: absolute;
        bottom: 15px;
        right: 15px;
        background: #00704a;
        color: white;
        padding: 0.6rem 1rem;
        border-radius: 6px;
        text-decoration: none;
        transition: background 0.3s;
      }

      .nav-btn:hover {
        background: #005c3b;
      }

      .carousel button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.5);
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .carousel:hover button {
        opacity: 1;
      }

      .carousel .prev {
        left: 10px;
      }

      .carousel .next {
        right: 10px;
      }

      .dots {
        position: absolute;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
      }

      .dots span {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: background 0.3s;
      }

      .dots span.active {
        background: #00704a;
      }

      .produce-section {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 2rem;
        padding: 2rem;
      }

      .produce-section.reverse {
        flex-direction: row-reverse;
      }

      .produce-text {
        flex: 1;
        font-size: 1.2rem;
      }

      .produce-image {
        flex: 1;
      }

      .produce-image img {
        width: 100%;
        height: auto;
        border-radius: 8px;
      }

      .carousel {
        position: relative;
        width: 600px;
        height: 400px;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        margin: 2rem auto;
      }

      .carousel-images {
        display: flex;
        width: 100%;
        height: 100%;
        transition: transform 0.5s ease-in-out;
      }

      .carousel-images img {
        width: 600px;
        height: 400px;
        object-fit: cover;
        flex-shrink: 0;
      }

      .carousel button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.5);
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem 1rem;
        border-radius: 6px;
      }

      .carousel button:hover {
        background: rgba(0, 0, 0, 0.7);
      }

      .carousel .prev {
        left: 10px;
      }

      .carousel .next {
        right: 10px;
      }
    </style>

    {% endblock %}
  </h1>
</h1>
