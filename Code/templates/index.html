{% extends 'layout.html' %} {% block content %}
<br />
<h1>
  Leaf & Lush Home
</h1>
    <div class="produce-section">
      <div class="produce-text">
        <h2>Welcome To L&L!</h2>
        <p>
Welcome to Leaf & Lush! Whether you have a green thumb or just starting out in gardening, Leaf and Lush is your go-to site for everything plant. Come join a vibrant community where you can share your garden goods, learn new techniques, and swap advice with fellow gardeners. Our site is designed to help you grow, not just plants, but closer to nature.</div>
      <div class="produce-image">
        <img
          src="{{ url_for('static', filename='assets/skilletChicken.jpg') }}"
          alt="Fresh Vegetables"
        />
      </div>
    </div>

    <div class="produce-section reverse">
      <div class="produce-text">
        <h2>Join Us Today!</h2>
        <p>
Get inspired with our recipes! From nutritious quick snacks grow by our very members, to garden-fresh cuisine, we have a range of recipes for any occasion. Whether you want to cook your harvest in a clever way or teach other of the skills you've gathered, we've got everything. Sign up with the Leaf and Lush community today and unlock your gardening skills!</div>
      <div class="produce-image">
        <img
          src="{{ url_for('static', filename='assets/homeGrownFoods.jpg') }}"
          alt="Fresh Fruits"
        />
      </div>
    </div>

    {% set sliders = [ {'id': 'latestCarousel', 'title': 'Latest Activity',
    'data': latestRecipes}, {'id': 'bestRatedCarousel', 'title': 'Best Rated
    Produce', 'data': bestRated}] %} {% for slider in sliders %}
    <div class="carousel-container">
      <h2>{{ slider.title }}</h2>
      <div class="carousel" id="{{ slider.id }}">
        <div class="carousel-images">
          {% for recipe in slider.data %}
          <div class="carousel-slide">
            <a href="{{ url_for('posts', postID=recipe.postID) }}">
              {% if recipe.image and recipe.image != 'None' %}
              <img src="{{ recipe.image }}" class="detail-image" />
              {% else %}
              <img
                src="/static/uploads/123/imageError.png"
                class="detail-image"
              />
              {% endif %}
            </a>
            <div class="slide-title">{{ recipe.title }}</div>
            <a
              href="{{ url_for('posts', postID=recipe.postID) }}"
              class="nav-btn"
            >
              Click To View More
            </a>
          </div>
          {% endfor %}
        </div>
        <button class="prev">&#10094;</button>
        <button class="next">&#10095;</button>
        <div class="dots"></div>
      </div>
    </div>
    {% endfor %} {% set sliders = [ {'id': 'mostLovedCarousel', 'title': 'Most
    Starred Posts', 'data': mostLoved} ] %} {% for slider in sliders %}
    <div class="carousel-container">
      <h2>{{ slider.title }}</h2>
      <div class="carousel" id="{{ slider.id }}">
        <div class="carousel-images">
          {% for recipe in slider.data %}
          <div class="carousel-slide">
            <div class="text-box">
              <h3 class="recipe-title">{{ recipe.title }}</h3>
              {% set words = recipe.content.split() %}
              <p class="recipe-preview">
                {{ words[:40]|join(' ') }}{% if words|length > 40 %}...{% endif
                %}
              </p>
              <a
                href="{{ url_for('posts', postID=recipe.postID) }}"
                class="nav-btn"
              >
                Click To View More
              </a>
            </div>
          </div>
          {% endfor %}
        </div>
        <button class="prev">&#10094;</button>
        <button class="next">&#10095;</button>
        <div class="dots"></div>
      </div>
    </div>
    {% endfor %}

    <script>
      document.querySelectorAll(".carousel").forEach((carousel) => {
        const imagesContainer = carousel.querySelector(".carousel-images");
        const slides = imagesContainer.children;
        const prevBtn = carousel.querySelector(".prev");
        const nextBtn = carousel.querySelector(".next");
        const dotsContainer = carousel.querySelector(".dots");
        let index = 0;

        for (let i = 0; i < slides.length; i++) {
          const dot = document.createElement("span");
          dot.addEventListener("click", () => {
            showSlide(i);
          });
          dotsContainer.appendChild(dot);
        }
        const dots = dotsContainer.querySelectorAll("span");

        function showSlide(i) {
          index = (i + slides.length) % slides.length;
          imagesContainer.style.transform = `translateX(${-index * 100}%)`;
          dots.forEach((d) => d.classList.remove("active"));
          if (dots[index]) dots[index].classList.add("active");
        }

        prevBtn.addEventListener("click", () => showSlide(index - 1));
        nextBtn.addEventListener("click", () => showSlide(index + 1));

        showSlide(0);
      });
    </script>

    <style>
      h2 {
        text-align: center;
        color: #228b22;
      }
      .carousel {
        position: relative;
        width: 600px;
        height: 300px;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        margin: 2rem auto;
        background: #d1ffbd;
      }

      .carousel-images {
        display: flex;
        width: 100%;
        height: 100%;
        transition: transform 0.5s ease-in-out;
      }

      .carousel-slide {
        position: relative;
        flex-shrink: 0;
        width: 100%;
        height: 100%;
        padding: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .carousel-slide .slide-title {
        position: absolute;
        bottom: 15px;
        left: 15px;
        color: white;
        background: rgba(0, 0, 0, 0.6);
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-size: 1rem;
      }
      .text-box {
        width: 90%;
        height: 100%;
        background: #b5e6a2;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        position: relative;
      }
      .carousel-slide .nav-btn {
        position: absolute;
        bottom: 15px;
        right: 15px;
        background-color: #4caf50;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        text-decoration: none;
        opacity: 0;
        transition: opacity 0.3s;
        
      }

      .carousel button {
        opacity: 0;
        transition: opacity 0.3s;
        height: 50px;
        transform: translateY(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .carousel-slide {
        position: relative;
        flex-shrink: 0;
        width: 100%;
        height: 100%;
      }

      .carousel-slide .nav-btn {
        position: absolute;
        bottom: 15px;
        right: 15px;
        transform: none;
        background-color: #4caf50;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        text-decoration: none;
        transition: opacity 0.3s;
        opacity: 0;
      }
      .carousel-slide:hover .nav-btn{
        background-color: #3e8e41;
      }
      .carousel .pause {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.6);
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        opacity: 0;
        transition: opacity 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .dots {
        position: absolute;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
        opacity: 0;
        transition: opacity 0.3s;
      }
      
      .carousel-slide:hover .nav-btn,
      .carousel:hover button,
      .carousel-slide .nav-btn,
      .carousel:hover .dots {
        opacity: 1;
      }

      .dots span {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: background 0.3s;
      }

      .dots span.active {
        background: #00704a;
      }

      .produce-section {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 2rem;
        padding: 2rem;
      }

      .produce-section.reverse {
        flex-direction: row-reverse;
      }

      .produce-text {
        flex: 1;
        font-size: 1.2rem;
      }

      .produce-image {
        flex: 1;
      }

      .produce-image img {
        width: 100%;
        height: auto;
        border-radius: 8px;
      }

      .carousel {
        position: relative;
        width: 600px;
        height: 400px;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        margin: 2rem auto;
      }

      .carousel-images img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.5s ease-in-out;
      }

      .carousel-images img {
        width: 600px;
        height: 400px;
        object-fit: cover;
        flex-shrink: 0;
      }

      .carousel button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.5);
        border: none;
        color: white;
        font-size: 2rem;
        cursor: pointer;
        padding: 0.5rem 1rem;
        border-radius: 6px;
      }

      .carousel button:hover {
        background: rgba(0, 0, 0, 0.7);
      }

      .carousel .prev {
        left: 10px;
      }

      .carousel .next {
        right: 10px;
      }
    </style>

    {% endblock %}
  </h1>
</h1>
